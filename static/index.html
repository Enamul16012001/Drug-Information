<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FDA Drug Search - Complete</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #e3f2fd 0%, #f5f5f5 50%, #e8f4f8 100%); 
            min-height: 100vh; 
            padding: 20px; 
        }
        .container { max-width: 1600px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); overflow: hidden; }
        .header { 
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%); 
            color: white; 
            padding: 30px; 
            text-align: center; 
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .tabs { display: flex; background: #f8f9fa; border-bottom: 3px solid #e9ecef; }
        .tab { 
            flex: 1; 
            padding: 20px; 
            text-align: center; 
            cursor: pointer; 
            font-size: 1.1em; 
            font-weight: bold; 
            color: #495057; 
            background: #f8f9fa; 
            border: none; 
            transition: all 0.3s ease; 
            position: relative; 
        }
        .tab:hover { background: #e9ecef; color: #2c3e50; }
        .tab.active { background: white; color: #3498db; }
        .tab.active::after { content: ''; position: absolute; bottom: -3px; left: 0; right: 0; height: 3px; background: #3498db; }
        .tab-content { display: none; padding: 30px; max-height: 80vh; overflow-y: auto; }
        .tab-content.active { display: block; }
        .search-section { 
            background: #f8f9fa; 
            padding: 25px; 
            border-radius: 15px; 
            margin-bottom: 20px; 
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
        }
        .search-section h2 { 
            color: #2c3e50; 
            margin-bottom: 20px; 
            font-size: 1.3em; 
            border-left: 4px solid #3498db; 
            padding-left: 15px; 
        }
        .search-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
        .search-item { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); }
        .search-item label { display: block; font-weight: 600; color: #495057; margin-bottom: 8px; font-size: 0.9em; }
        .search-item input, .search-item select { 
            width: 100%; 
            padding: 10px; 
            border: 2px solid #e9ecef; 
            border-radius: 8px; 
            font-size: 1em; 
            margin-bottom: 5px;
        }
        .search-item input:focus, .search-item select:focus { outline: none; border-color: #3498db; }
        
        .search-controls { display: flex; gap: 10px; align-items: center; margin-top: 8px; }
        .limit-selector { 
            width: auto; 
            padding: 8px 12px; 
            border: 2px solid #e9ecef; 
            border-radius: 8px; 
            font-size: 0.9em;
            background: white;
            color: #495057;
            font-weight: 600;
        }
        .limit-selector:focus { outline: none; border-color: #3498db; }
        
        .btn { 
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 0.95em; 
            font-weight: bold; 
            flex: 1;
            transition: all 0.3s; 
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3); }
        .btn-special { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }
        .btn-special:hover { box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3); }
        
        .quick-search { 
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%); 
            padding: 25px; 
            border-radius: 15px; 
            margin-bottom: 20px; 
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        .quick-search h2 { color: white; margin-bottom: 15px; font-size: 1.3em; }
        .quick-search-form { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        .quick-search-form input { 
            flex: 1; 
            min-width: 250px;
            padding: 12px; 
            border: none; 
            border-radius: 8px; 
            font-size: 1em; 
        }
        .quick-search-form select {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 0.95em;
            background: white;
            color: #495057;
            font-weight: 600;
            cursor: pointer;
        }
        .quick-search-form button { 
            padding: 12px 30px; 
            background: white; 
            color: #3498db; 
            border: none; 
            border-radius: 8px; 
            font-size: 1em; 
            font-weight: bold; 
            cursor: pointer; 
            transition: all 0.3s;
        }
        .quick-search-form button:hover { transform: scale(1.05); box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3); }
        
        .results { margin-top: 20px; }
        .results-header { 
            background: #f8f9fa; 
            padding: 15px 20px; 
            border-radius: 10px; 
            margin-bottom: 15px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
        }
        .results-header h3 { color: #2c3e50; font-size: 1.2em; }
        .result-count { 
            background: #3498db; 
            color: white; 
            padding: 5px 15px; 
            border-radius: 20px; 
            font-weight: bold; 
        }
        .result-card { 
            background: white; 
            border: 2px solid #e9ecef; 
            border-radius: 12px; 
            padding: 20px; 
            margin-bottom: 15px; 
            transition: all 0.3s;
        }
        .result-card:hover { border-color: #3498db; box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2); }
        .result-title { 
            color: #2c3e50; 
            font-size: 1.3em; 
            font-weight: bold; 
            margin-bottom: 12px; 
            border-bottom: 2px solid #3498db; 
            padding-bottom: 8px; 
        }
        .result-details { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 12px; }
        .detail-item { padding: 10px; background: #f8f9fa; border-radius: 8px; }
        .detail-label { font-weight: 600; color: #495057; font-size: 0.85em; margin-bottom: 5px; }
        .detail-value { color: #2c3e50; font-size: 0.95em; max-height: 80px; overflow-y: auto; }
        
        .loading { text-align: center; padding: 40px; color: #7f8c8d; }
        .spinner { 
            border: 4px solid #f3f3f3; 
            border-top: 4px solid #3498db; 
            border-radius: 50%; 
            width: 50px; 
            height: 50px; 
            animation: spin 1s linear infinite; 
            margin: 20px auto; 
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .no-results { 
            text-align: center; 
            padding: 40px; 
            color: #7f8c8d; 
            background: #f8f9fa; 
            border-radius: 10px; 
        }
        .badge { 
            display: inline-block; 
            padding: 4px 10px; 
            border-radius: 12px; 
            font-size: 0.8em; 
            font-weight: bold; 
            margin: 2px; 
        }
        .badge-danger { background: #e74c3c; color: white; }
        .badge-warning { background: #f39c12; color: white; }
        .badge-success { background: #2ecc71; color: white; }
        .badge-primary { background: #3498db; color: white; }
        
        @media (max-width: 768px) { 
            .search-grid { grid-template-columns: 1fr; } 
            .tabs { flex-direction: column; } 
            .quick-search-form { flex-direction: column; }
            .quick-search-form input { width: 100%; }
            .search-controls { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• FDA Drug Search System</h1>
            <p>Complete Drug Database - DrugsFDA, NDC & Drug Labels</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('drugsfda')">DrugsFDA</button>
            <button class="tab" onclick="switchTab('ndc')">NDC Database</button>
            <button class="tab" onclick="switchTab('label')">Drug Labels</button>
        </div>

        <!-- DrugsFDA Tab -->
        <div id="drugsfda-tab" class="tab-content active">
            <div class="quick-search">
                <h2>üîç Quick Search All Fields</h2>
                <div class="quick-search-form">
                    <input type="text" id="drugsfda-quick-search" placeholder="Search drugs by any field...">
                    <select class="limit-selector" id="drugsfda-quick-limit">
                        <option value="10">10 results</option>
                        <option value="20" selected>20 results</option>
                        <option value="50">50 results</option>
                        <option value="99">99 results</option>
                    </select>
                    <button onclick="searchDrugsFDAAll()">Search</button>
                </div>
            </div>

            <div class="search-section">
                <h2>Advanced Search Options</h2>
                <div class="search-grid">
                    <div class="search-item">
                        <label>Brand Name</label>
                        <input type="text" id="drugsfda-brand" placeholder="e.g., Lipitor, Advil">
                        <div class="search-controls">
                            <select class="limit-selector" id="drugsfda-brand-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchDrugsFDA('openfda.brand_name', 'drugsfda-brand', 'drugsfda-brand-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Generic Name</label>
                        <input type="text" id="drugsfda-generic" placeholder="e.g., Atorvastatin">
                        <div class="search-controls">
                            <select class="limit-selector" id="drugsfda-generic-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchDrugsFDA('openfda.generic_name', 'drugsfda-generic', 'drugsfda-generic-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Manufacturer</label>
                        <input type="text" id="drugsfda-manufacturer" placeholder="e.g., Pfizer">
                        <div class="search-controls">
                            <select class="limit-selector" id="drugsfda-manufacturer-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchDrugsFDA('openfda.manufacturer_name', 'drugsfda-manufacturer', 'drugsfda-manufacturer-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Application Number</label>
                        <input type="text" id="drugsfda-appnum" placeholder="e.g., NDA021687">
                        <div class="search-controls">
                            <select class="limit-selector" id="drugsfda-appnum-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchDrugsFDA('application_number', 'drugsfda-appnum', 'drugsfda-appnum-limit')">Search</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="drugsfda-results" class="results"></div>
        </div>

        <!-- NDC Tab -->
        <div id="ndc-tab" class="tab-content">
            <div class="quick-search">
                <h2>üîç Quick Search All Fields</h2>
                <div class="quick-search-form">
                    <input type="text" id="ndc-quick-search" placeholder="Search NDC database...">
                    <select class="limit-selector" id="ndc-quick-limit">
                        <option value="10">10 results</option>
                        <option value="20" selected>20 results</option>
                        <option value="50">50 results</option>
                        <option value="99">99 results</option>
                    </select>
                    <button onclick="searchNDCAll()">Search</button>
                </div>
            </div>

            <div class="search-section">
                <h2>Product Information</h2>
                <div class="search-grid">
                    <div class="search-item">
                        <label>Brand Name</label>
                        <input type="text" id="ndc-brand" placeholder="e.g., Tylenol">
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-brand-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('brand-name', 'ndc-brand', 'ndc-brand-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Generic Name</label>
                        <input type="text" id="ndc-generic" placeholder="e.g., Acetaminophen">
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-generic-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('generic-name', 'ndc-generic', 'ndc-generic-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Product NDC</label>
                        <input type="text" id="ndc-product-ndc" placeholder="e.g., 0067-2091">
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-product-ndc-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('product-ndc', 'ndc-product-ndc', 'ndc-product-ndc-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Dosage Form</label>
                        <input type="text" id="ndc-dosage" placeholder="TABLET, LOTION, CAPSULE">
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-dosage-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('dosage-form', 'ndc-dosage', 'ndc-dosage-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Route</label>
                        <input type="text" id="ndc-route" placeholder="ORAL, TOPICAL, IV">
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-route-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('route', 'ndc-route', 'ndc-route-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Manufacturer</label>
                        <input type="text" id="ndc-manufacturer" placeholder="e.g., Pfizer">
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-manufacturer-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('manufacturer', 'ndc-manufacturer', 'ndc-manufacturer-limit')">Search</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="search-section">
                <h2>Classification & Regulation</h2>
                <div class="search-grid">
                    <div class="search-item">
                        <label>DEA Schedule</label>
                        <select id="ndc-dea">
                            <option value="">Select Schedule</option>
                            <option value="CI">CI (Schedule I)</option>
                            <option value="CII">CII (Schedule II)</option>
                            <option value="CIII">CIII (Schedule III)</option>
                            <option value="CIV">CIV (Schedule IV)</option>
                            <option value="CV">CV (Schedule V)</option>
                        </select>
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-dea-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn btn-special" onclick="searchNDC('dea-schedule', 'ndc-dea', 'ndc-dea-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Product Type</label>
                        <select id="ndc-product-type">
                            <option value="">Select Type</option>
                            <option value="HUMAN PRESCRIPTION DRUG">Prescription</option>
                            <option value="HUMAN OTC DRUG">Over-the-Counter</option>
                            <option value="VACCINE">Vaccine</option>
                        </select>
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-product-type-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('product-type', 'ndc-product-type', 'ndc-product-type-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Marketing Category</label>
                        <select id="ndc-marketing">
                            <option value="">Select Category</option>
                            <option value="NDA">NDA</option>
                            <option value="ANDA">ANDA</option>
                            <option value="BLA">BLA</option>
                        </select>
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-marketing-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('marketing-category', 'ndc-marketing', 'ndc-marketing-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Active Ingredient</label>
                        <input type="text" id="ndc-ingredient" placeholder="e.g., Ibuprofen">
                        <div class="search-controls">
                            <select class="limit-selector" id="ndc-ingredient-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchNDC('active-ingredient', 'ndc-ingredient', 'ndc-ingredient-limit')">Search</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="ndc-results" class="results"></div>
        </div>

        <!-- Drug Labels Tab -->
        <div id="label-tab" class="tab-content">
            <div class="quick-search">
                <h2>üîç Quick Search All Fields</h2>
                <div class="quick-search-form">
                    <input type="text" id="label-quick-search" placeholder="Search drug labels...">
                    <select class="limit-selector" id="label-quick-limit">
                        <option value="10">10 results</option>
                        <option value="20" selected>20 results</option>
                        <option value="50">50 results</option>
                        <option value="99">99 results</option>
                    </select>
                    <button onclick="searchLabelAll()">Search</button>
                </div>
            </div>

            <div class="search-section">
                <h2>Basic Search</h2>
                <div class="search-grid">
                    <div class="search-item">
                        <label>Brand Name</label>
                        <input type="text" id="label-brand" placeholder="e.g., Lipitor">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-brand-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('brand-name', 'label-brand', 'label-brand-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Generic Name</label>
                        <input type="text" id="label-generic" placeholder="e.g., Atorvastatin">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-generic-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('generic-name', 'label-generic', 'label-generic-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Manufacturer</label>
                        <input type="text" id="label-manufacturer" placeholder="e.g., Pfizer">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-manufacturer-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('manufacturer', 'label-manufacturer', 'label-manufacturer-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>‚ö†Ô∏è Black Box Warnings</label>
                        <div class="search-controls">
                            <select class="limit-selector" id="label-boxed-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn btn-special" onclick="searchLabel('boxed-warning', null, 'label-boxed-limit')">Show All Black Box Warnings</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="search-section">
                <h2>Drug Information</h2>
                <div class="search-grid">
                    <div class="search-item">
                        <label>Indications & Usage</label>
                        <input type="text" id="label-indications" placeholder="e.g., diabetes, hypertension">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-indications-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('indications-and-usage', 'label-indications', 'label-indications-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Dosage & Administration</label>
                        <input type="text" id="label-dosage" placeholder="Search dosing info">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-dosage-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('dosage-and-administration', 'label-dosage', 'label-dosage-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Contraindications</label>
                        <input type="text" id="label-contraindications" placeholder="When NOT to use">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-contraindications-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('contraindications', 'label-contraindications', 'label-contraindications-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Clinical Pharmacology</label>
                        <input type="text" id="label-pharmacology" placeholder="How it works">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-pharmacology-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('clinical-pharmacology', 'label-pharmacology', 'label-pharmacology-limit')">Search</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="search-section">
                <h2>Safety Information</h2>
                <div class="search-grid">
                    <div class="search-item">
                        <label>Warnings</label>
                        <input type="text" id="label-warnings" placeholder="Search warnings">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-warnings-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('warnings', 'label-warnings', 'label-warnings-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Adverse Reactions</label>
                        <input type="text" id="label-adverse" placeholder="Side effects">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-adverse-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('adverse-reactions', 'label-adverse', 'label-adverse-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Drug Interactions</label>
                        <input type="text" id="label-interactions" placeholder="e.g., warfarin">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-interactions-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('drug-interactions', 'label-interactions', 'label-interactions-limit')">Search</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Overdosage</label>
                        <input type="text" id="label-overdose" placeholder="Overdose information">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-overdose-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('overdosage', 'label-overdose', 'label-overdose-limit')">Search</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="search-section">
                <h2>Special Populations</h2>
                <div class="search-grid">
                    <div class="search-item">
                        <label>Pregnancy</label>
                        <div class="search-controls">
                            <select class="limit-selector" id="label-pregnancy-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('pregnancy', null, 'label-pregnancy-limit')">Pregnancy Information</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Pediatric Use</label>
                        <div class="search-controls">
                            <select class="limit-selector" id="label-pediatric-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('pediatric-use', null, 'label-pediatric-limit')">Pediatric Use</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Geriatric Use</label>
                        <div class="search-controls">
                            <select class="limit-selector" id="label-geriatric-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('geriatric-use', null, 'label-geriatric-limit')">Geriatric Use</button>
                        </div>
                    </div>
                    <div class="search-item">
                        <label>Nursing Mothers</label>
                        <input type="text" id="label-nursing" placeholder="Breastfeeding info">
                        <div class="search-controls">
                            <select class="limit-selector" id="label-nursing-limit">
                                <option value="10" selected>10 results</option>
                                <option value="20">20 results</option>
                                <option value="50">50 results</option>
                            </select>
                            <button class="btn" onclick="searchLabel('nursing-mothers', 'label-nursing', 'label-nursing-limit')">Search</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="label-results" class="results"></div>
        </div>
    </div>

    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(`${tab}-tab`).classList.add('active');
        }

        function showLoading(resultsId) {
            document.getElementById(resultsId).innerHTML = '<div class="loading"><div class="spinner"></div><p>Searching FDA Database...</p></div>';
        }

        function showError(resultsId, message) {
            document.getElementById(resultsId).innerHTML = `<div class="no-results"><h3>‚ùå Error</h3><p>${message}</p></div>`;
        }

        function showNoResults(resultsId) {
            document.getElementById(resultsId).innerHTML = '<div class="no-results"><h3>üîç No Results Found</h3><p>Try different search terms</p></div>';
        }

        // DrugsFDA Functions
        async function searchDrugsFDAAll() {
            const query = document.getElementById('drugsfda-quick-search').value;
            const limit = document.getElementById('drugsfda-quick-limit').value;
            if (!query) return;
            showLoading('drugsfda-results');
            try {
                const response = await fetch(`/api/drugsfda/search/all?query=${encodeURIComponent(query)}&limit=${limit}`);
                const data = await response.json();
                displayResults(data, 'drugsfda-results', 'drugsfda');
            } catch (error) {
                showError('drugsfda-results', error.message);
            }
        }

        async function searchDrugsFDA(field, inputId, limitId) {
            const query = document.getElementById(inputId).value;
            const limit = document.getElementById(limitId).value;
            if (!query) return;
            showLoading('drugsfda-results');
            try {
                const response = await fetch(`/api/drugsfda/search?query=${encodeURIComponent(query)}&field=${field}&limit=${limit}`);
                const data = await response.json();
                displayResults(data, 'drugsfda-results', 'drugsfda');
            } catch (error) {
                showError('drugsfda-results', error.message);
            }
        }

        // NDC Functions
        async function searchNDCAll() {
            const query = document.getElementById('ndc-quick-search').value;
            const limit = document.getElementById('ndc-quick-limit').value;
            if (!query) return;
            showLoading('ndc-results');
            try {
                const response = await fetch(`/api/ndc/search/all?query=${encodeURIComponent(query)}&limit=${limit}`);
                const data = await response.json();
                displayResults(data, 'ndc-results', 'ndc');
            } catch (error) {
                showError('ndc-results', error.message);
            }
        }

        async function searchNDC(endpoint, inputId, limitId) {
            const query = document.getElementById(inputId).value;
            const limit = document.getElementById(limitId).value;
            if (!query) return;
            showLoading('ndc-results');
            try {
                const params = new URLSearchParams();
                if (endpoint === 'brand-name' || endpoint === 'generic-name' || endpoint === 'manufacturer' || endpoint === 'active-ingredient') {
                    params.append('name', query);
                } else if (endpoint === 'product-ndc' || endpoint === 'package-ndc') {
                    params.append('ndc', query);
                } else if (endpoint === 'dosage-form') {
                    params.append('form', query);
                } else if (endpoint === 'route') {
                    params.append('route', query);
                } else if (endpoint === 'product-type') {
                    params.append('type', query);
                } else if (endpoint === 'dea-schedule') {
                    params.append('schedule', query);
                } else if (endpoint === 'marketing-category') {
                    params.append('category', query);
                }
                params.append('limit', limit);
                
                const response = await fetch(`/api/ndc/${endpoint}?${params.toString()}`);
                const data = await response.json();
                displayResults(data, 'ndc-results', 'ndc');
            } catch (error) {
                showError('ndc-results', error.message);
            }
        }

        // Label Functions
        async function searchLabelAll() {
            const query = document.getElementById('label-quick-search').value;
            const limit = document.getElementById('label-quick-limit').value;
            if (!query) return;
            showLoading('label-results');
            try {
                const response = await fetch(`/api/label/search/all?query=${encodeURIComponent(query)}&limit=${limit}`);
                const data = await response.json();
                displayResults(data, 'label-results', 'label');
            } catch (error) {
                showError('label-results', error.message);
            }
        }

        async function searchLabel(endpoint, inputId, limitId) {
            const query = inputId ? document.getElementById(inputId).value : '';
            const limit = document.getElementById(limitId).value;
            if (inputId && !query) return;
            showLoading('label-results');
            try {
                let url = `/api/label/${endpoint}`;
                if (inputId) {
                    url += `?query=${encodeURIComponent(query)}&limit=${limit}`;
                } else {
                    url += `?limit=${limit}`;
                }
                
                const response = await fetch(url);
                const data = await response.json();
                displayResults(data, 'label-results', 'label');
            } catch (error) {
                showError('label-results', error.message);
            }
        }

        function displayResults(data, resultsId, type) {
            const resultsDiv = document.getElementById(resultsId);
            if (!data.results || data.results.length === 0) {
                showNoResults(resultsId);
                return;
            }

            let html = `<div class="results-header"><h3>Search Results</h3><span class="result-count">${data.results.length} Results</span></div>`;

            data.results.forEach(result => {
                const openfda = result.openfda || {};
                let title = 'Unknown Drug';
                
                if (type === 'drugsfda') {
                    title = openfda.brand_name ? openfda.brand_name[0] : result.products?.[0]?.brand_name || 'N/A';
                } else if (type === 'ndc') {
                    title = result.brand_name || result.generic_name || 'N/A';
                } else if (type === 'label') {
                    title = openfda.brand_name ? openfda.brand_name[0] : openfda.generic_name ? openfda.generic_name[0] : 'N/A';
                }

                html += `<div class="result-card"><div class="result-title">${title}</div><div class="result-details">`;

                // Common fields
                if (openfda.generic_name) {
                    html += `<div class="detail-item"><div class="detail-label">Generic Name</div><div class="detail-value">${openfda.generic_name[0]}</div></div>`;
                }
                if (result.generic_name) {
                    html += `<div class="detail-item"><div class="detail-label">Generic Name</div><div class="detail-value">${result.generic_name}</div></div>`;
                }
                if (openfda.manufacturer_name) {
                    html += `<div class="detail-item"><div class="detail-label">Manufacturer</div><div class="detail-value">${openfda.manufacturer_name[0]}</div></div>`;
                }

                // Type-specific fields
                if (type === 'drugsfda') {
                    if (result.application_number) html += `<div class="detail-item"><div class="detail-label">Application Number</div><div class="detail-value">${result.application_number}</div></div>`;
                } else if (type === 'ndc') {
                    if (result.product_ndc) html += `<div class="detail-item"><div class="detail-label">Product NDC</div><div class="detail-value">${result.product_ndc}</div></div>`;
                    if (result.dosage_form) html += `<div class="detail-item"><div class="detail-label">Dosage Form</div><div class="detail-value">${result.dosage_form}</div></div>`;
                    if (result.route) html += `<div class="detail-item"><div class="detail-label">Route</div><div class="detail-value">${Array.isArray(result.route) ? result.route.join(', ') : result.route}</div></div>`;
                    if (result.dea_schedule) html += `<div class="detail-item"><div class="detail-label">DEA Schedule</div><div class="detail-value"><span class="badge badge-danger">${result.dea_schedule}</span></div></div>`;
                } else if (type === 'label') {
                    if (result.indications_and_usage) html += `<div class="detail-item"><div class="detail-label">Indications</div><div class="detail-value">${result.indications_and_usage[0].substring(0, 150)}...</div></div>`;
                    if (result.warnings) html += `<div class="detail-item"><div class="detail-label">Warnings</div><div class="detail-value">${result.warnings[0].substring(0, 150)}...</div></div>`;
                    if (result.boxed_warning) html += `<div class="detail-item"><div class="detail-label">‚ö†Ô∏è Black Box Warning</div><div class="detail-value"><span class="badge badge-danger">BLACK BOX</span></div></div>`;
                }

                html += `</div></div>`;
            });

            resultsDiv.innerHTML = html;
        }

        // Enter key support
        document.addEventListener('DOMContentLoaded', function() {
            ['drugsfda-quick-search', 'ndc-quick-search', 'label-quick-search'].forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    el.addEventListener('keypress', e => {
                        if (e.key === 'Enter') {
                            if (id.includes('drugsfda')) searchDrugsFDAAll();
                            else if (id.includes('ndc')) searchNDCAll();
                            else searchLabelAll();
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>